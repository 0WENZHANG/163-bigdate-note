## Hadoop2.0 产生背景

- Hadoop1.0 中 `HDFS` 和 `MapReduce` 在高可用、扩展性方面存在问题。

- `HDFS` 存在的问题：

    - Namenode单点故障问题 ---> HA

    - NameNode压力过大问题，且内存受限，影响扩展

- `MapReduce` 存在的问题：

    - JobTracker 访问压力大，影响系统扩展性

    - 难以支持除 MapReduce 之外的计算框架，如 Spark、Storm等。

## Hadoop2.x 和 Hadoop1.x

![1](https://github.com/jiaoqiyuan/pics/raw/master/sxt/hadoop1.x2.x.png)

可以看到 Hadoop2.x 是在 Hadoop1.x 基础上添加了 YARN，从而支持了更多的计算框架，同时将 namenode 从繁重的任务重解脱出来，不在负责任务调度任务，转而由 YARN 进行任务调度的管理。

## HDFS2.x

HDFS2.x 解决了 HDFS1.x中单点故障和内存受限的问题。

- 单点故障问题通过 HDFS HA 解决，通过主备 NameNode 方式，如果主 NameNode 发生故障，则切换到备 NameNode 上。这里牵扯到有主从 NameNode 元数据同步问题。

- 内存受限的问题：

    - HDFS Federation (联邦)

    - 水平扩展，支持多个NameNode

        - 每个 NameNode分管一部分目录

        - 所有 NameNode 共享所有 DataNode 存储资源

- 2.x 仅是架构上发生了变化，使用方式不变。

## Hadoop HA

![2](https://github.com/jiaoqiyuan/pics/raw/master/sxt/hadoop-ha.png)