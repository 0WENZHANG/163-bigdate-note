## Storm 架构

Storm 架构可以类比为公司中人员关系，如下图所示。

![1](https://github.com/jiaoqiyuan/pics/raw/master/sxt/Storm-structure.png)

- Storm 的架构类似于 Hadoop，是主从模型(Master/Slave)。

- 其中 Numbus 是主节点，负责任务(Task)的调度和资源分配。

- Supervisor 是从节点，是负责执行任务的具体部分，启动和停止自己管理的 Worker 进程。

    Supervisor 中有具体执行 task 的 Worker。其中 task 对应的就是 Spout 和 Bolt。

    Supervisor 可以启动多个 Worker， 具体启动多少个可以配置。
    
    一个 Topology 可以运行在多个 Worker 上，也可以通过配置来指定。

- Storm 中各个节点是无状态的，节点上的信息(元数据)会存储到 Zookeeper 中。

- Worker 是运行具体组件逻辑(Spout/Bolt)的进程。

以下都是线程，以上都是进程。

- Task 是 Spout 和 Bolt 线程的统称。

- executor：Spout 和 Bolt 可能会共享一个线程。

- Storm 调优的关键是设置好一个 Topology 启动多少个 Worker， 一个Worker上启动多少个 executor， 然后一个 executor 启动多少个 Task。